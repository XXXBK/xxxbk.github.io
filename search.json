[{"title":"Hello World","url":"/2025/07/15/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n"},{"title":"Dify部署流程：镜像源替换与服务启动","url":"/2025/07/15/Dify-%E7%A6%BB%E7%BA%BF%E9%83%A8%E7%BD%B2%E5%85%A8%E6%B5%81%E7%A8%8B%EF%BC%9A%E9%95%9C%E5%83%8F%E6%BA%90%E6%9B%BF%E6%8D%A2%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8/","content":"Dify 部署流程：镜像源替换与服务启动\n一、Dify 镜像源替换操作\n批量替换镜像前缀&#xA;在 docker-compose.yaml 所在目录执行全局替换，添加 docker.1ms.run&#x2F; 前缀：\nsed -i &#x27;s/image: /image: docker.1ms.run\\\\//g&#x27; docker-compose.yaml\n\n特殊镜像路径修正&#xA;问题路径&#xA;image: docker.1ms.run/docker.elastic.co/elasticsearch/elasticsearch:8.14.3\n\n修正命令&#xA;sed -i &#x27;s|docker.1ms.run/docker.elastic.co/|docker.1ms.run/elastic/|g&#x27; docker-compose.yaml\n\n正确路径&#xA;image: docker.1ms.run/elastic/elasticsearch:8.14.3\n\n基础镜像补充替换&#xA;sed -i &#x27;s|image: postgres:|image: docker.1ms.run/postgres:|g&#x27; docker-compose.yamlsed -i &#x27;s|image: redis:|image: docker.1ms.run/redis:|g&#x27; docker-compose.yamlsed -i &#x27;s|image: nginx:|image: docker.1ms.run/nginx:|g&#x27; docker-compose.yaml\n\n二、部署前准备工作\n赋予挂载目录权限：\nchmod -R 777 ./volumes ./elasticsearch\n\n三、启动与验证 Dify 服务\n后台启动服务&#xA;docker-compose up -d\n\n验证服务状态&#xA;docker-compose ps  # 检查容器运行状态docker-compose logs -f  # 查看实时日志\n\n访问 Dify 界面&#xA;浏览器输入 http:&#x2F;&#x2F; 服务器 IP:3000，默认账号 admin@example.com，密码 password。\n四、部署过程常见问题\n镜像路径嵌套错误&#xA;问题&#xA;镜像路径包含 docker.1ms.run&#x2F;docker.elastic.co&#x2F; 嵌套结构。\n解决&#xA;使用 sed 精准替换：\nsed -i &#x27;s|docker.1ms.run/docker.elastic.co/|docker.1ms.run/elastic/|g&#x27; docker-compose.yaml\n\n权限不足导致启动失败&#xA;问题&#xA;挂载目录无读写权限。\n解决&#xA;递归设置目录权限：\nchmod -R 777 ./volumes\n\n服务启动异常&#xA;解决&#xA;通过日志排查问题：&#x20;\ndocker-compose logs -f  # 查看所有服务日志docker-compose logs dify-api  # 查看指定服务日志\n\n五、核心操作总结\n镜像替换流程&#xA;全局前缀替换 → 特殊镜像路径修正 → 基础镜像补充替换\n启动验证流程&#xA;docker-compose up -d → docker-compose ps → 访问 Web 界面\n关键命令&#xA;sed -i &#x27;s/image: /image: docker.1ms.run\\\\//g&#x27; docker-compose.yamlchmod -R 777 ./volumesdocker-compose up -d","categories":["dify"],"tags":["dify 镜像源"]}]